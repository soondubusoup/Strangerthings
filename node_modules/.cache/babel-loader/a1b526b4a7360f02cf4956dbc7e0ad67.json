{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory,useParams}from\"react-router\";var baseURL=\"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";import SinglePost from\"./SinglePost\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var token=_ref.token,setPosts=_ref.setPosts,posts=_ref.posts,fetchPosts=_ref.fetchPosts;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var history=useHistory();var _useParams=useParams(),postId=_useParams.postId;var post=posts.find(function(post){return post._id===postId;});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Post\"}),/*#__PURE__*/_jsx(SinglePost,{post:post}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})}).then(function(response){return response.json();}).then(function(result){}).catch(console.error);case 3:_context.next=5;return fetchPosts();case 5:history.push(\"/posts\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\".concat(post.title),value:title,onChange:function onChange(event){return setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\".concat(post.description),value:description,onChange:function onChange(event){return setDescription(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\".concat(post.price),value:price,onChange:function onChange(event){return setPrice(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\".concat(post.location),value:location,onChange:function onChange(event){return setLocation(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"willDeliver\"}),/*#__PURE__*/_jsxs(\"select\",{type:\"text\",placeholder:\"\".concat(post.willDeliver),value:willDeliver,onChange:function onChange(event){return setWillDeliver(event.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"no\"}),/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"yes\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post\"})]})]});};export default EditPost;","map":{"version":3,"sources":["/Users/soondubu/Desktop/Strangerthings/src/Components/EditPost.js"],"names":["React","useState","useHistory","useParams","baseURL","SinglePost","EditPost","token","setPosts","posts","fetchPosts","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","history","postId","post","find","_id","event","preventDefault","fetch","method","headers","Authorization","body","JSON","stringify","then","response","json","result","catch","console","error","push","target","value"],"mappings":"odAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,cAAtC,CACA,GAAMC,CAAAA,OAAO,CAAG,+DAAhB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA4C,IAAzCC,CAAAA,KAAyC,MAAzCA,KAAyC,CAAlCC,QAAkC,MAAlCA,QAAkC,CAAxBC,KAAwB,MAAxBA,KAAwB,CAAjBC,UAAiB,MAAjBA,UAAiB,CAC3D,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAsCX,QAAQ,CAAC,EAAD,CAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eACA,eAA0Bb,QAAQ,CAAC,EAAD,CAAlC,yCAAOc,KAAP,eAAcC,QAAd,eACA,eAAgCf,QAAQ,CAAC,EAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eACA,eAAsCjB,QAAQ,CAAC,KAAD,CAA9C,0CAAOkB,WAAP,gBAAoBC,cAApB,gBACA,GAAMC,CAAAA,OAAO,CAAGnB,UAAU,EAA1B,CACA,eAAmBC,SAAS,EAA5B,CAAQmB,MAAR,YAAQA,MAAR,CAEA,GAAMC,CAAAA,IAAI,CAAGd,KAAK,CAACe,IAAN,CAAW,SAACD,IAAD,QAAUA,CAAAA,IAAI,CAACE,GAAL,GAAaH,MAAvB,EAAX,CAAb,CACA,mBACE,wCACE,iCADF,cAEE,KAAC,UAAD,EAAY,IAAI,CAAEC,IAAlB,EAFF,cAGE,cACE,QAAQ,2FAAE,iBAAOG,KAAP,kHACRA,KAAK,CAACC,cAAN,GADQ,sBAGFC,CAAAA,KAAK,WAAIxB,OAAJ,mBAAqBkB,MAArB,EAA+B,CACxCO,MAAM,CAAE,OADgC,CAExCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYxB,KAAZ,CAFN,CAF+B,CAMxCyB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBX,IAAI,CAAE,CACJZ,KAAK,CAALA,KADI,CAEJE,WAAW,CAAXA,WAFI,CAGJE,KAAK,CAALA,KAHI,CAIJE,QAAQ,CAARA,QAJI,CAKJE,WAAW,CAAXA,WALI,CADa,CAAf,CANkC,CAA/B,CAAL,CAgBHgB,IAhBG,CAgBE,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAhBF,EAiBHF,IAjBG,CAiBE,SAACG,MAAD,CAAY,CAAE,CAjBhB,EAkBHC,KAlBG,CAkBGC,OAAO,CAACC,KAlBX,CAHE,8BAuBF/B,CAAAA,UAAU,EAvBR,QAwBRW,OAAO,CAACqB,IAAR,CAAa,QAAb,EAxBQ,sDAAF,+DADV,wBA4BE,yCACE,gCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,WAAKnB,IAAI,CAACZ,KAAV,CAFb,CAGE,KAAK,CAAEA,KAHT,CAIE,QAAQ,CAAE,kBAACe,KAAD,QAAWd,CAAAA,QAAQ,CAACc,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAnB,EAJZ,EAFF,GA5BF,cAsCE,yCACE,sCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,WAAKrB,IAAI,CAACV,WAAV,CAFb,CAGE,KAAK,CAAEA,WAHT,CAIE,QAAQ,CAAE,kBAACa,KAAD,QAAWZ,CAAAA,cAAc,CAACY,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAzB,EAJZ,EAFF,GAtCF,cAgDE,yCACE,gCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,WAAKrB,IAAI,CAACR,KAAV,CAFb,CAGE,KAAK,CAAEA,KAHT,CAIE,QAAQ,CAAE,kBAACW,KAAD,QAAWV,CAAAA,QAAQ,CAACU,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAnB,EAJZ,EAFF,GAhDF,cA0DE,yCACE,mCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,WAAKrB,IAAI,CAACN,QAAV,CAFb,CAGE,KAAK,CAAEA,QAHT,CAIE,QAAQ,CAAE,kBAACS,KAAD,QAAWR,CAAAA,WAAW,CAACQ,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAtB,EAJZ,EAFF,GA1DF,cAoEE,yCACE,sCADF,cAEE,gBACE,IAAI,CAAC,MADP,CAEE,WAAW,WAAKrB,IAAI,CAACJ,WAAV,CAFb,CAGE,KAAK,CAAEA,WAHT,CAIE,QAAQ,CAAE,kBAACO,KAAD,QAAWN,CAAAA,cAAc,CAACM,KAAK,CAACiB,MAAN,CAAaC,KAAd,CAAzB,EAJZ,wBAME,eAAQ,KAAK,CAAC,OAAd,gBANF,cAOE,eAAQ,KAAK,CAAC,MAAd,iBAPF,GAFF,GApEF,cAgFE,eAAQ,IAAI,CAAC,QAAb,kBAhFF,GAHF,GADF,CAwFD,CAlGD,CAoGA,cAAetC,CAAAA,QAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nconst baseURL = \"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";\nimport SinglePost from \"./SinglePost\";\n\nconst EditPost = ({ token, setPosts, posts, fetchPosts }) => {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [willDeliver, setWillDeliver] = useState(false);\n  const history = useHistory();\n  const { postId } = useParams();\n\n  const post = posts.find((post) => post._id === postId);\n  return (\n    <>\n      <h1>Edit Post</h1>\n      <SinglePost post={post}></SinglePost>\n      <form\n        onSubmit={async (event) => {\n          event.preventDefault();\n\n          await fetch(`${baseURL}/posts/${postId}`, {\n            method: \"PATCH\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify({\n              post: {\n                title,\n                description,\n                price,\n                location,\n                willDeliver,\n              },\n            }),\n          })\n            .then((response) => response.json())\n            .then((result) => {})\n            .catch(console.error);\n\n          await fetchPosts();\n          history.push(\"/posts\");\n        }}\n      >\n        <fieldset>\n          <label>Title</label>\n          <input\n            type=\"text\"\n            placeholder={`${post.title}`}\n            value={title}\n            onChange={(event) => setTitle(event.target.value)}\n          ></input>\n        </fieldset>\n\n        <fieldset>\n          <label>description</label>\n          <input\n            type=\"text\"\n            placeholder={`${post.description}`}\n            value={description}\n            onChange={(event) => setDescription(event.target.value)}\n          ></input>\n        </fieldset>\n\n        <fieldset>\n          <label>price</label>\n          <input\n            type=\"text\"\n            placeholder={`${post.price}`}\n            value={price}\n            onChange={(event) => setPrice(event.target.value)}\n          ></input>\n        </fieldset>\n\n        <fieldset>\n          <label>location</label>\n          <input\n            type=\"text\"\n            placeholder={`${post.location}`}\n            value={location}\n            onChange={(event) => setLocation(event.target.value)}\n          ></input>\n        </fieldset>\n\n        <fieldset>\n          <label>willDeliver</label>\n          <select\n            type=\"text\"\n            placeholder={`${post.willDeliver}`}\n            value={willDeliver}\n            onChange={(event) => setWillDeliver(event.target.value)}\n          >\n            <option value=\"false\">no</option>\n            <option value=\"true\">yes</option>\n          </select>\n        </fieldset>\n        <button type=\"submit\">Post</button>\n      </form>\n    </>\n  );\n};\n\nexport default EditPost;\n"]},"metadata":{},"sourceType":"module"}