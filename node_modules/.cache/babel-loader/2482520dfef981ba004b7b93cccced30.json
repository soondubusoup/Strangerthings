{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useParams,useHistory}from\"react-router\";import{Link}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL=\"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";var AccountForm=function AccountForm(_ref){var setToken=_ref.setToken,setUser=_ref.setUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var params=useParams();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"This is the \",params.method,\" method\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var resp,respObj,fetchUser,result,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch(\"\".concat(baseURL,\"/users/\").concat(params.method),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:username,password:password}})});case 3:resp=_context.sent;_context.next=6;return resp.json();case 6:respObj=_context.sent;_context.prev=7;setToken(respObj.data.token);if(!respObj.data){_context.next=19;break;}_context.next=12;return fetch(\"\".concat(baseURL,\"/users/me\"),{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(respObj.data.token)}});case 12:fetchUser=_context.sent;_context.next=15;return fetchUser.json();case 15:result=_context.sent;data=result;if(data.data){setUser(data.data);}history.push(\"/\");case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](7);console.log(\"= CLEAN UP THIS ERROR MESSAGE \");case 24:case\"end\":return _context.stop();}}},_callee,null,[[7,21]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/account/register\",children:\"Click here to Register\"})]});};export default AccountForm;","map":{"version":3,"sources":["/Users/soondubu/Desktop/Strangerthings/src/Components/AccountForm.js"],"names":["React","useState","useParams","useHistory","Link","baseURL","AccountForm","setToken","setUser","username","setUsername","password","setPassword","history","params","method","event","preventDefault","fetch","headers","body","JSON","stringify","user","resp","json","respObj","data","token","Authorization","fetchUser","result","push","console","log","target","value"],"mappings":"odAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,cAAtC,CACA,OAASC,IAAT,KAAqB,kBAArB,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,+DAAhB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAA2B,IAAxBC,CAAAA,QAAwB,MAAxBA,QAAwB,CAAdC,OAAc,MAAdA,OAAc,CAC7C,cAAgCP,QAAQ,CAAC,EAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CACA,GAAMW,CAAAA,MAAM,CAAGZ,SAAS,EAAxB,CAEA,mBACE,wCACE,sCAAkBY,MAAM,CAACC,MAAzB,aADF,cAEE,cAEE,QAAQ,2FAAE,iBAAOC,KAAP,yJACRA,KAAK,CAACC,cAAN,GADQ,sBAEWC,CAAAA,KAAK,WAAIb,OAAJ,mBAAqBS,MAAM,CAACC,MAA5B,EAAsC,CAC5DA,MAAM,CAAE,MADoD,CAE5DI,OAAO,CAAE,CACP,eAAgB,kBADT,CAFmD,CAK5DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAE,CACJd,QAAQ,CAARA,QADI,CAEJE,QAAQ,CAARA,QAFI,CADa,CAAf,CALsD,CAAtC,CAFhB,QAEFa,IAFE,qCAccA,CAAAA,IAAI,CAACC,IAAL,EAdd,QAcFC,OAdE,+BAgBRnB,QAAQ,CAACmB,OAAO,CAACC,IAAR,CAAaC,KAAd,CAAR,CAhBQ,IAkBJF,OAAO,CAACC,IAlBJ,iDAmBkBT,CAAAA,KAAK,WAAIb,OAAJ,cAAwB,CACnDc,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPU,aAAa,kBAAYH,OAAO,CAACC,IAAR,CAAaC,KAAzB,CAFN,CAD0C,CAAxB,CAnBvB,SAmBAE,SAnBA,sCAyBeA,CAAAA,SAAS,CAACL,IAAV,EAzBf,SAyBAM,MAzBA,eA0BAJ,IA1BA,CA0BOI,MA1BP,CA2BN,GAAIJ,IAAI,CAACA,IAAT,CAAe,CACbnB,OAAO,CAACmB,IAAI,CAACA,IAAN,CAAP,CACD,CAEDd,OAAO,CAACmB,IAAR,CAAa,GAAb,EA/BM,yFAmCVC,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAnCU,qEAAF,+DAFV,wBA2CE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAEzB,QAHT,CAIE,QAAQ,CAAE,kBAACO,KAAD,QAAWN,CAAAA,WAAW,CAACM,KAAK,CAACmB,MAAN,CAAaC,KAAd,CAAtB,EAJZ,EA3CF,cAiDE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAEzB,QAHT,CAIE,QAAQ,CAAE,kBAACK,KAAD,QAAWJ,CAAAA,WAAW,CAACI,KAAK,CAACmB,MAAN,CAAaC,KAAd,CAAtB,EAJZ,EAjDF,cAuDE,eAAQ,IAAI,CAAC,QAAb,oBAvDF,GAFF,cA2DE,KAAC,IAAD,EAAM,EAAE,CAAC,mBAAT,oCA3DF,GADF,CA+DD,CAtED,CAwEA,cAAe9B,CAAAA,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useParams, useHistory } from \"react-router\";\nimport { Link } from \"react-router-dom\";\n\nconst baseURL = \"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";\n\nconst AccountForm = ({ setToken, setUser }) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const history = useHistory();\n  const params = useParams();\n\n  return (\n    <>\n      <div>This is the {params.method} method</div>\n      <form\n      \n        onSubmit={async (event) => {\n          event.preventDefault();\n          const resp = await fetch(`${baseURL}/users/${params.method}`, {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              user: {\n                username,\n                password,\n              },\n            }),\n          });\n          const respObj = await resp.json();\n          try {\n          setToken(respObj.data.token);\n\n          if (respObj.data) {\n            const fetchUser = await fetch(`${baseURL}/users/me`, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${respObj.data.token}`,\n              },\n            });\n            const result = await fetchUser.json();\n            const data = result;\n            if (data.data) {\n              setUser(data.data);\n            }\n\n            history.push(\"/\");\n          }\n        \n        }  catch (error){ \n        console.log(\"= CLEAN UP THIS ERROR MESSAGE \")\n      }\n      \n      }}\n\n      >\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          value={username}\n          onChange={(event) => setUsername(event.target.value)}\n        ></input>\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n        ></input>\n        <button type=\"submit\">Submit</button>\n      </form>\n      <Link to=\"/account/register\">Click here to Register</Link>\n    </>\n  );\n};\n\nexport default AccountForm;"]},"metadata":{},"sourceType":"module"}