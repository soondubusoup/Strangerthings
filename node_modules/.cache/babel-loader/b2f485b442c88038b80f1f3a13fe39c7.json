{"ast":null,"code":"import _regeneratorRuntime from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/soondubu/Desktop/Strangerthings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from\"react\";import SinglePost from\"./SinglePost\";import Search from\"./Search\";import{Link}from\"react-router-dom\";import{useParams}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL=\"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";var Posts=function Posts(_ref){var user=_ref.user,token=_ref.token,posts=_ref.posts,fetchPosts=_ref.fetchPosts,setPosts=_ref.setPosts;var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postId){var respObj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 2:respObj=_context.sent;_context.next=5;return fetchPosts();case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Search,{posts:posts,setPosts:setPosts,fetchPosts:fetchPosts}),posts.map(function(post){return/*#__PURE__*/_jsxs(SinglePost,{post:post,user:user,token:token,fetchPosts:fetchPosts,children:[user._id===post.author._id?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(post._id);},children:\"Delete\"}):\"\",post&&/*#__PURE__*/_jsx(Link,{to:\"/posts/\".concat(post._id),children:\" View Post \"}),user._id===post.author._id?post&&/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(post._id),children:\" Edit Post \"}):\"\"]},post._id);})]});};export default Posts;","map":{"version":3,"sources":["/Users/soondubu/Desktop/Strangerthings/src/Components/Posts.js"],"names":["React","useEffect","useState","SinglePost","Search","Link","useParams","baseURL","Posts","user","token","posts","fetchPosts","setPosts","handleDelete","postId","fetch","method","headers","Authorization","respObj","map","post","_id","author"],"mappings":"uTAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,KAA0B,cAA1B,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,+DAAhB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiD,IAA9CC,CAAAA,IAA8C,MAA9CA,IAA8C,CAAxCC,KAAwC,MAAxCA,KAAwC,CAAjCC,KAAiC,MAAjCA,KAAiC,CAA1BC,UAA0B,MAA1BA,UAA0B,CAAfC,QAAe,MAAfA,QAAe,CAC7D,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,MAAP,oJACGC,CAAAA,KAAK,WAAIT,OAAJ,mBAAqBQ,MAArB,EAA+B,CACxDE,MAAM,CAAE,QADgD,CAExDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYT,KAAZ,CAFN,CAF+C,CAA/B,CADR,QACbU,OADa,qCAQbR,CAAAA,UAAU,EARG,uDAAH,kBAAZE,CAAAA,YAAY,6CAAlB,CAWA,mBACE,wCAEA,KAAC,MAAD,EAAQ,KAAK,CAAEH,KAAf,CAAsB,QAAQ,CAAEE,QAAhC,CAA0C,UAAU,CAAED,UAAtD,EAFA,CAGDD,KAAK,CAACU,GAAN,CAAU,SAACC,IAAD,qBACL,MAAC,UAAD,EAEE,IAAI,CAAEA,IAFR,CAGE,IAAI,CAAEb,IAHR,CAIE,KAAK,CAAEC,KAJT,CAKE,UAAU,CAAEE,UALd,WAOGH,IAAI,CAACc,GAAL,GAAaD,IAAI,CAACE,MAAL,CAAYD,GAAzB,cACC,eAAQ,OAAO,CAAE,yBAAMT,CAAAA,YAAY,CAACQ,IAAI,CAACC,GAAN,CAAlB,EAAjB,oBADD,CAGC,EAVJ,CAYGD,IAAI,eAAI,KAAC,IAAD,EAAM,EAAE,kBAAYA,IAAI,CAACC,GAAjB,CAAR,yBAZX,CAeId,IAAI,CAACc,GAAL,GAAaD,IAAI,CAACE,MAAL,CAAYD,GAA1B,CACCD,IAAI,eAAI,KAAC,IAAD,EAAM,EAAE,iBAAWA,IAAI,CAACC,GAAhB,CAAR,yBADT,CAEC,EAjBJ,GACOD,IAAI,CAACC,GADZ,CADK,EAAV,CAHC,GADF,CA8BD,CA1CD,CA4CA,cAAef,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport SinglePost from \"./SinglePost\";\nimport Search from \"./Search\";\nimport { Link } from \"react-router-dom\";\nimport { useParams } from \"react-router\";\n\nconst baseURL = \"https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT\";\n\nconst Posts = ({ user, token, posts, fetchPosts,setPosts }) => {\n  const handleDelete = async (postId) => {\n    const respObj = await fetch(`${baseURL}/posts/${postId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    await fetchPosts();\n  };\n\n  return (\n    <>\n\n    <Search posts={posts} setPosts={setPosts} fetchPosts={fetchPosts} />\n  {posts.map((post) => (\n        <SinglePost\n          key={post._id}\n          post={post}\n          user={user}\n          token={token}\n          fetchPosts={fetchPosts}\n        >\n          {user._id === post.author._id ? (\n            <button onClick={() => handleDelete(post._id)}>Delete</button>\n          ) : (\n            \"\"\n          )}\n          {post && <Link to={`/posts/${post._id}`}> View Post </Link>}\n          \n\n          {(user._id === post.author._id) ?\n            post && <Link to={`/edit/${post._id}`}> Edit Post </Link>\n          : \"\"\n          }\n\n\n        </SinglePost>\n      ))}\n    </>\n  );\n};\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}